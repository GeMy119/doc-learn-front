<div class="form-container">
  <form (ngSubmit)="initiatePayment()" [formGroup]="paymentForm" class="form">
    <h2>Student Data for Payment</h2>

    <div class="form-group">
      <label for="firstName">First Name:</label>
      <input type="text" class="form-control" id="firstName" formControlName="firstName" required>
      <div *ngIf="paymentForm.get('firstName')?.invalid && (paymentForm.get('firstName')?.dirty || paymentForm.get('firstName')?.touched)"
           class="text-danger">
        <div *ngIf="paymentForm.get('firstName')?.errors?.['required']">First name is required.</div>
        <div *ngIf="paymentForm.get('firstName')?.errors?.['minlength']">First name must be at least 3 characters.</div>
        <div *ngIf="paymentForm.get('firstName')?.errors?.['maxlength']">First name cannot be more than 20 characters.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="lastName">Last Name:</label>
      <input type="text" class="form-control" id="lastName" formControlName="lastName" required>
      <div *ngIf="paymentForm.get('lastName')?.invalid && (paymentForm.get('lastName')?.dirty || paymentForm.get('lastName')?.touched)"
           class="text-danger">
        <div *ngIf="paymentForm.get('lastName')?.errors?.['required']">Last name is required.</div>
        <div *ngIf="paymentForm.get('lastName')?.errors?.['minlength']">Last name must be at least 3 characters.</div>
        <div *ngIf="paymentForm.get('lastName')?.errors?.['maxlength']">Last name cannot be more than 20 characters.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="phone">Phone:</label>
      <input type="tel" class="form-control" id="phone" formControlName="phone" required>
      <div *ngIf="paymentForm.get('phone')?.invalid && (paymentForm.get('phone')?.dirty || paymentForm.get('phone')?.touched)"
           class="text-danger">
        <div *ngIf="paymentForm.get('phone')?.errors?.['required']">Phone number is required.</div>
        <div *ngIf="paymentForm.get('phone')?.errors?.['pattern']">Invalid phone number format.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="email">Email:</label>
      <input type="email" class="form-control" id="email" formControlName="email" required>
      <div *ngIf="paymentForm.get('email')?.invalid && (paymentForm.get('email')?.dirty || paymentForm.get('email')?.touched)"
           class="text-danger">
        <div *ngIf="paymentForm.get('email')?.errors?.['required']">Email is required.</div>
        <div *ngIf="paymentForm.get('email')?.errors?.['email']">Invalid email format.</div>
      </div>
    </div>

    <div class="form-check">
      <input type="checkbox" class="form-check-input" id="isChecked" formControlName="isChecked" required>
      <label class="form-check-label" for="isChecked">I agree to the terms and conditions</label>
      <!-- Error messages for agreeTerms checkbox -->
      <div *ngIf="paymentForm.get('isChecked')?.invalid && (paymentForm.get('isChecked')?.dirty || paymentForm.get('isChecked')?.touched)"
           class="text-danger">
        <div *ngIf="paymentForm.get('isChecked')?.errors?.['required']">You must agree to the terms and conditions.</div>
      </div>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="paymentForm.invalid || loading">
      Go to Payment Process
      <span *ngIf="loading"><i class="fas fa-spinner fa-spin"></i></span>
    </button>
  </form>
</div>
